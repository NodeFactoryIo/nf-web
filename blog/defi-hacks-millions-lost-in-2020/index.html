<!DOCTYPE html>
<html lang="en"><head>
    <meta http-equiv="Content-Type" content="text/html;" charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <base href="https://nodefactory.io">

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="../../apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
    <link rel="manifest" href="../../site.webmanifest">
    <link rel="mask-icon" href="../../safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">




<title>DeFi hacks - millions lost in 2020 | NodeFactory</title>


<meta name="description" content="An overview on some Decentralized finance (DeFi) hacks and exploitations that happened during 2020.">



<meta content='defi, hack, solidity, oracle' name="keywords">








<!-- Open Graph data / Facebook Card data -->
<meta property="og:title" content="DeFi hacks - millions lost in 2020 | NodeFactory">

<meta property="og:type" content="article">

<meta property="og:image" content="https://www.nodefactory.io/images/blog/defi.png">
<meta property="og:image:alt" content="NodeFactory logo">

<meta property="og:description" content="An overview on some Decentralized finance (DeFi) hacks and exploitations that happened during 2020.">

<meta property="og:locale" content="en">
<meta property="og:url" content="https://nodefactory.io/blog/defi-hacks-millions-lost-in-2020/">

<!-- Twitter Card data -->
<meta name="twitter:title" content="DeFi hacks - millions lost in 2020 | NodeFactory">
<meta name="twitter:card" content="summary">

<meta property="twitter:description" content="An overview on some Decentralized finance (DeFi) hacks and exploitations that happened during 2020.">

<meta name="twitter:creator" content="@nodefactoryio">
<meta name="twitter:image" content="https://www.nodefactory.io/images/blog/defi.png" />
<meta name="twitter:image:src" content="https://www.nodefactory.io/images/blog/defi.png" />


    

    
    
        <script defer type="application/ld+json">
            {
              "@context": "http://schema.org",
              "@type": "Article",
              "headline": "DeFi hacks - millions lost in 2020",
              "author": {
                "@type": "Organization",
                "name": "NodeFactory"
              },
              "datePublished": "2021-01-14",
              "description": "An overview on some Decentralized finance (DeFi) hacks and exploitations that happened during 2020.",
              "wordCount":  992 ,
              "mainEntityOfPage": "True",
              "dateModified": "2021-01-14",
              "image": {
                "@type": "imageObject",
                "url": "https:\/\/www.nodefactory.io\/images\/blog\/defi.png"
              },
              "publisher": {
                "@type": "Organization",
                "name": "NodeFactory - Blockchain research and development company",
                "logo": {
                  "@type": "imageObject",
                  "url": "https://www.nodefactory.io/images/NodeFactory_logo.png"
                }
              }
            }
          </script>
    

<!-- Mobile header color for Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#2c638f">
    <!-- Mobile header color Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#2c638f">
    <!-- Mobile header color for iOS Safari (supports black, black-translucent or default) -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!--Fonts-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

    <!-- Style load -->
    
    
        <link href="../../main.14fee.css" rel="stylesheet">
    

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111993876-1" type="text/javascript"></script>
    <script async type="text/javascript">
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-111993876-1');
    </script>
    
</head><body>

    <div class="row landing padded"><header>
    <a href="../../">
        <img src="images/NodeFactory-transparent.png" alt="NodeFactory logo" />
    </a>

    <nav class="col-md-12" id="menu-bar">
        <div id="menu">
            <i class="fa fa-bars hidden-lg"></i>
        </div>

        <ul class="nav" id="nav">
            <li><a href="#services">Services</a></li>
            <li><a href="#projects">Projects</a></li>
            <li><a href="../../blog">Blog</a></li>
            <li><a href="#team">Team</a></li>
            <li><a href="../../careers">Careers</a></li>
            <li><a href="../../portfolio">Portfolio</a></li>
        </ul>

    </nav>
    <div class="menu-bg" id="menu-bg"></div>
</header>
<section class="landingcontent blog-header">
            <div class="column">
                <h4>DeFi hacks - millions lost in 2020</h4>
                <p class="date">
                    
                        Nikola Mlinaric -
                    
                    January 14th, 2021.
                </p>
            </div>

            <div class="illustrations">
                <img src="images/net.png" class="illustration-1" alt="network illustration">
            </div>
        </section>
    </div>

    <div class="blog-content-wrapper">
        
            <div class="row center">
                <div class="blog-image">
                    <img src="../../images/blog/defi.png" alt="DeFi hacks - millions lost in 2020" />
                </div>
            </div>
        

        <div class="blog-content">
            

<h1 id="defi-hacks-millions-lost-in-2020">DeFi Hacks - millions lost in 2020</h1>

<h2 id="the-good-and-the-bad">The good and the bad</h2>

<p>Decentralized finance (DeFi) brings the commonly known things like saving and lending money from our regular lives into the blockchain world but with some nice twists. DeFi is growing at a very fast pace, ending 2020. with the total value locked (TVL) being <a href="https://defipulse.com/">$15.32 billion</a> which is 22x more than at the end of 2019.</p>

<p>Being a fairly young and emerging technology, things are developing at a very fast pace, meaning that besides all the current great things there is a certainty that much more will follow. But things in DeFi are not all sunshine and roses and the reason for this is the number of hacks that have happened in 2020. Only in the top 15 hacks over 120 million dollars was stolen and according to <a href="https://www.theblockcrypto.com/linked/89830/hackers-stole-120-million-via-15-defi-hacks-in-2020">The Block Research</a> only $45.6 million was recovered which is not an easy thing to do as blockchain actions are not reversible. This is not unexpected as so many DeFi projects were released during the year but it’s certainly something that we should all learn from, especially from the developer’s perspective.</p>

<h2 id="let-s-see-some-of-the-things-that-happened">Let’s see some of the things that happened</h2>

<h3 id="the-compound-case-an-oracle-gone-bad">The Compound case, an oracle gone bad</h3>

<p>Being the third-largest DeFi platform and considered as one of the best doesn’t mean you are invulnerable to exploits. In <a href="https://compound.finance/">Compound</a>’s case the exploit was a quite heavy one, around <a href="https://twitter.com/rleshner/status/1332139014334287872">$85 million of loans</a> were liquidated on the platform, so let’s explain what happened.
To borrow cryptocurrency, users have to put up collateral that exceeds the amount they are borrowing. Meaning that the collateral is locked in a smart contract until some ending condition is met. In an alternative scenario, it can happen that the collateral may become undercollateralized and the loan gets liquidated. Blockchain doesn’t know the current prices of each coin on each exchange so it has to get it somewhere. Here <em>oracles</em> come into play as they bring off-chain data into blockchain (smart contracts), making a connection between those two worlds.
In this case, the price of DAI/USDC was pushed on <a href="https://pro.coinbase.com/trade/DAI-USDC">Coinbase PRO</a> (the only source for Compound’s oracle) by someone or by natural market pressures to $1.3, tricking the blockchain via it’s oracle that the price of DAI stable coin had shot up.</p>

<figure>
    <img src="../../images/blog/dai-usdc-spike-on-coinbase-pro.png"/> <figcaption>
            <h4>Screenshot of DAI-USDC price spike on Coinbase PRO</h4>
        </figcaption>
</figure>


<p>With that data the blockchain thought that the DAI price was too high and that many of the loans were undercollateralized and liquidated them, resulting in huge losses.</p>

<h3 id="the-harvest-case-a-flash-loan-gone-bad">The Harvest case, a flash loan gone bad</h3>

<p><a href="https://harvest.finance/">Harvest</a> is a lending platform that automatically farms the highest yield available from other DeFi protocols. On Oct. 26, due to an exploit, Harvest was drained for $24 million but easily that could have been even much more.</p>

<p>Due to an “engineering error” (that’s how the Harvest team called it), the attacker was able to use <em>flash loans</em> to manipulate the value of Harvest Finance’s reserves held in the Curve protocol. The flash loans drove down the prices of USDT and USDC on Harvest, allowing the attacker to buy more stablecoins than it would normally be able to. This allowed them to pay back the flash loans and make a profit on the side. The hacker swapped the stolen funds for renBTC, exited with BTC and returned $2.5 million of the stolen funds to developers.</p>

<h3 id="the-cover-protocol-case-a-solidity-bug-gone-bad">The COVER protocol case, a Solidity bug gone bad</h3>

<p>At the end of 2020., <a href="https://www.coverprotocol.com/">COVER protocol</a> was a victim of an infinite printing scheme hack causing the price of the COVER token to plunge from around $850 to less than $10. The exploit was achieved through a bug in one of the contracts where pool data was cached in memory to save some gas. Pool data was later updated in storage but the cached data was forgotten to be updated. The outdated cached data is later used in calculations and that enabled the hack.</p>

<p>The hacker cashed out the tokens in other cryptocurrencies including ETH, DAI and WBTC, but hours later, a white hat hacker claimed responsibility for the attack and <a href="https://twitter.com/bantg/status/1343553858354737156?s=21">returned funds</a>.</p>

<p>To resolve the exploit the COVER protocol team took a snapshot one block before the exploit and issued a new token to those users. In addition to that Binance, one of the world’s biggest CEXs compensated a total of around $10 million from its <a href="https://academy.binance.com/en/glossary/secure-asset-fund-for-users">Binance SAFU</a> fund.</p>

<h2 id="how-can-we-all-do-better">How can we all do better?</h2>

<p>Everything in software engineering is not perfect and development is prone to making mistakes and suffering from exploits. The same rules apply to blockchain, whether or not being a younger technology and not so much tested or more mature. But, as always, there are some things that can be done to prevent or at least to minimize harm.</p>

<p>In the case of Compound, the obvious thing that could have been done to prevent such an exploit from happening is to use more than one oracle for price information. There is no “one size fits all” solution but if you <em>really</em> need to use oracles, you can use multiple reports, or if that’s not possible then include a delay with one source averaging the price over time to potentially prevent anomalies.</p>

<p>In the second case, it could be possible to prevent depositing and withdrawing funds within a single transaction. In case that’s not an option, to minimize the possible damage of flash loans, withdrawals of stablecoins can be handled in separate transactions.</p>

<p>Solidity bugs are best to prevent by having more extensive testing, covering edge cases and running static analyzers. Most importantly, doing an external audit is very helpful because more eyes can see things from different angles. Also, open bounties for white-hat hackers with good prizes have proven to be effective as well.</p>

<p><em>NodeFactory is a blockchain R&amp;D company that turns ideas into reliable solutions. If you need a consultation related to the blockchain technology, get in touch with us using the contact form below.</em></p>

        </div>
    </div><section id="contact" class="wrapper contact">
    <div class="col-xs-12 col-sm-10 col-md-10">
        <div id="contact-background">
            <h2>Get in touch</h2>
            <p>Tell us about your project. Let’s see how we can make it happen!</p>

            <form action="https://formspree.io/info@nodefactory.io" method="POST">
                <div class="contact-Column">
                    <div class="input-row">
                        <div class="input-row-first-input">
                            <input aria-label="subject" type="text" name="subject"  placeholder="I'm interested in"/>
                        </div>

                        <div class="input-row-second-input">
                            <input aria-label="email" type="text" name="email"  placeholder="Email"/>
                        </div>
                    </div>
                </div>

                <div class="input-row">
                    <div class="input-row-third-input">
                        <input aria-label="Your company" type="text" name="company"  placeholder="Company"/>
                    </div>

                    <div class="input-row-fourth-input">
                        <input aria-label="Your name" type="text" name="name"  placeholder="Full name"/>
                    </div>
                </div>

                <div class="input-row">
                    <div class="input-row-fifth-input">
                        <input aria-label="Description" type="textarea" name="description"  placeholder="Project description"/>
                    </div>
                </div>

                <div class="input-row submit-row">
                    <div class="submit-button">
                        <input type="submit" value="TALK TO OUR TEAM"/>
                        <i class="fas fa-arrow-right"></i>
                    </div>
                </div>
            </form>
        </div>
    </div>
</section>
<footer>
    <div class="footer">
        <div>
            <div class="row flex-column">
                <a href="https://ubik.hr/" aria-label="UBIK" rel="noreferrer"><h3>Members of UBIK</h3></a>
                <a href="https://www.meetup.com/BUIDL-Zagreb/" aria-label="BUIDL Meetup" rel="noreferrer">
                    <h3>BUIDL meetup organizers</h3>
                </a>
            </div>
        </div>

        <div class="banners row">
            <a href="https://topappdevelopmentcompanies.com/directory/app-developers/blockchain" target="_blank">
                <img src="https://topappdevelopmentcompanies.com/badges/top-app-development-companies.png" alt="blockchain developers 2019" title="Blockchain Developers 2019"/>
            </a>
        </div>

        <div class="footer-cripto-payments">
            <img alt="DAI" src="images/icons/dai.png">
            <img alt="BTC" src="images/icons/btc.png">
            <img alt="ETH" src="images/icons/eth.png">
            <p>Crypto accepted</p>
        </div>
        <div class="footer-legal">

            <p>Node Factory d.o.o. Oreškovićeva 6v, 10000 Zagreb. VAT ID: HR34703059147. Banka: Erste&Steiermärkische Bank d.d., IBAN: HR7624020061100867083, Swift: ESBCHR22
                Tvrtka upisana pod brojem MBS 081152605 u Trgovačkom sudu u Zagrebu. Temeljni kapital od 20.000,00 kn uplaćen u cjelosti.
                Članovi uprave društva su Belma Gutlić i Marin Petrunić.</p>
        </div>

    </div>
</footer>



    <script src="../../main.14fee.js"></script>

</body>
</html>